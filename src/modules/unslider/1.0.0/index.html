<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Unslider &mdash; 一个超小的 jQuery轮播（slider）插件</title>
	<link rel="stylesheet" href="index.css">
</head>
<body>
	<!-- default -->
	<div class="banner">
		<ul>
			<li>This is a slide.</li>
			<li>This is another slide.</li>
			<li>This is a final slide.</li>
		</ul>
	</div>
	
	<!-- 自定义dot -->
	<div class="unslider">
		<ul>
			<li data-img="http://pic3.40017.cn/line/admin/2016/01/14/14/JVbVzB.jpg">
			  <a href="http://www.ly.com/dujia/tours/251020.html?ak=22F9CDD65182E7A59FB871E78C56B6CDB39BDFD21653D01B&amp;cityId=226" title="泰国" trace="trace_2">泰国</a>
			</li>
			<li data-img="http://pic3.40017.cn/line/admin/2016/01/14/15/EOVFW6.jpg">
			  <a href="http://www.ly.com/dujia/tours/276430.html?ak=86F8CC86129BA5999FB871E78C56B6CDB39BDFD21653D01B&amp;cityId=226" title="日本" trace="trace_3">日本</a>
			</li>
			<li data-img="http://pic3.40017.cn/line/admin/2016/01/14/15/uOStRj.jpg">
			  <a href="http://www.ly.com/dujia/tours/211989.html?ak=CE4CA40F8405C5619FB871E78C56B6CDB39BDFD21653D01B&amp;cityId=226" title="香港首发" trace="trace_4">香港首发</a>
			</li>
	    </ul>
	</div>
	<script src="../../jquery.js"></script>
	<script src="index.js"></script>
	<script>
		///////////////////////////////////////////////////// default
		$(".banner").unslider({
			speed: 500,               //  The speed to animate each slide (in milliseconds)
			delay: 3000,              //  The delay between slide animations (in milliseconds)
			pause:true,               //  mouse pause
			complete: function() {},  //  A function that gets called after every slide animation
			keys: false,               //  Enable keyboard (left, right) arrow shortcuts
			dots: true,               //  Display dot navigation
			fluid: false              //  Support responsive design. May break non-responsive designs
		});


		//////////////////////////////////////////////////// 自定义dot
		var unslider = $(".unslider").unslider({
			speed: 0,
			delay: 3000,
			dots: true,
			complete: function (obj, slide) {

				if ($(slide).attr("data-img-loaded") !== "true") {
					var img = $(slide).data("img");
					$(slide).css("background-image", "url("+ img +")");

					$(slide).attr("data-img-loaded", "true");

					console.log("loaded")
				}
			}
		});

		// fix hover
		var slider = unslider.data("unslider");
		var dots = $(".unslider").find(".dot");
		dots.on("mouseover", function (e) {
		    var index = dots.index($(this));
		    // console.log(index)
		    slider.to(index);
		});

		// fix first img load
		var firstSlide = unslider.find("[data-img]").eq(0);
		var firstImg = firstSlide.data("img");
		firstSlide.css("background-image", "url("+ firstImg +")")
				  .attr("data-img-loaded", "true");
	</script>
</body>
</html>