<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <meta charset="utf-8" />
    <link href="demo.css" rel="stylesheet" />
    <style>
        body {
            font-size: 12px;
        }

        .row {
            width: 100%;
            margin: 10px 0;
        }

        .tmpl-show {
            width: auto;
            margin: 5px 0;
            padding: 10px;
            background-color: black;
            height: auto;
            color: #00ff21;
        }

        .tmpl-js {
            width: auto;
            margin: 5px 0;
            padding: 10px;
            background-color: black;
            height: auto;
            color: #ffd800;
        }

        .text1 {
            margin: 5px 0;
        }
    </style>
    <script src="../../jquery.js"></script>
    <script src="../../sea.js"></script>
    <!--<script src="demo.es5.js"></script>-->
</head>
<body>
    <script>
        var onloadevents = new Array();
        function fn_onload(fn) {
            onloadevents.push(fn);
        }
    </script>
    <div class="row">
        <h3>纯字符串验证(手机号)</h3>
        <div class="show-html">
            <input type="text" class="text1" />
            <button type="button" onclick="fn_test1(this);">test</button>
        </div>
        <script>
            function fn_test1(obj) {
                var v = $(obj).parent().find("input").val();
                var k = "mobile";
                var r = vali.test(k, v);
                alert(r);
            }
        </script>
        <div class="tmpl-show"></div>
        <div class="tmpl-js"></div>
    </div>
    <div class="row">
        <h3>自动验证(非空)</h3>
        <div class="show-html">
            <div class="J_valitest1">
                <input type="text" class="text1 validate[required]" />
            </div>
        </div>
        <script>
            $(document).on("valiload", function () {
                vali.attach(".J_valitest1");
            });
        </script>
        <div class="tmpl-show"></div>
        <div class="tmpl-js"></div>
    </div>
    <div class="row">
        <h3>自动验证(非空) 气泡位置 气泡内容自定义</h3>
        <div class="show-html">
            <div class="J_valitest2">
                <input type="text" class="text1 validate[required]" data-prompt-position="bottomRight:-70,3" data-prompt-message="required:这是不可为空的自定义内容" />
            </div>
        </div>
        <script>
            $(document).on("valiload", function () {
                vali.attach(".J_valitest2");
            });
        </script>
        <div class="tmpl-show"></div>
        <div class="tmpl-js"></div>
    </div>
    <!--自动模块验证-->
    <div class="row">
        <h3>自动模块验证</h3>
        <div class="show-html">
            <div class="J_valitest20">
                <input type="text" class="text1 validate[required,custom[mobile]]" placeholder="请输入手机号" /><br />
                <input type="text" class="text1 validate[required]" placeholder="不能为空" /><br />
                <input type="text" class="text1 validate[custom[email]]" placeholder="请输入邮编" /><br />
            </div>
        </div>
        <script>
            $(document).on("valiload", function () {
                vali.attach(".J_valitest20");
            });
        </script>
        <div class="tmpl-show"></div>
        <div class="tmpl-js"></div>
    </div>
    <div class="row">
        <h3>手动验证(非空,手机)</h3>
        <div class="show-html">
            <input type="text" class="text1 validate[required,custom[mobile]]" />
            <button type="button" onclick="fn_test2(this);">test</button>
        </div>
        <script>
            function fn_test2(obj) {
                var r = vali.validate($(obj).parent().find("input"));
                //alert(r);
            }
        </script>
        <div class="tmpl-show"></div>
        <div class="tmpl-js"></div>
    </div>
    <!--手动模块验证-->
    <div class="row">
        <h3>手动模块验证</h3>
        <div class="show-html">
            <div class="J_valitest3">
                <input type="text" class="text1 validate[custom[mobile]]" placeholder="请输入手机号" /><br />
                <input type="text" class="text1 validate[required]" placeholder="不能为空" /><br />
                <input type="text" class="text1 validate[custom[email]]" placeholder="请输入邮编" /><br />
                <button type="button" onclick="fn_test3();">test</button>
            </div>
        </div>
        <script>
            function fn_test3(obj) {
                var r = vali.validate(".J_valitest3");
                console.log(r);
            }
        </script>
        <div class="tmpl-show"></div>
        <div class="tmpl-js"></div>
    </div>

    <div class="row">
        <h3>事件:failure,success,show,hide</h3>
        <div class="show-html">
            <div class="J_valitest4">
                <input type="text" class="text1 validate[custom[mobile]]" placeholder="请输入手机号" /><br />
                <input type="text" class="text1 validate[required]" placeholder="不能为空" /><br />
                <input type="text" class="text1 validate[custom[email]]" placeholder="请输入邮编" /><br />
            </div>
        </div>
        <script>
            $(document).on("valiload", function () {
                vali.attach(".J_valitest4");
                vali.on("success", function (e, obj) {
                    console.log("success:"+obj.val());
                });
                vali.on("failure", function (e, obj) {
                    console.log("failure:" + obj.val());
                });
                vali.on("show", function (e, obj) {
                    console.log("show:" + obj.val());
                });
                vali.on("hide", function (e, obj) {
                    console.log("hide:" + obj.val());
                });
            });
        </script>
        <div class="tmpl-show"></div>
        <div class="tmpl-js"></div>
    </div>

    <div class="row">
        <h3>多重验证</h3>
        <div class="show-html J_valitest6">
            <input type="text" class="text1 validate[required,custom[mobile]]" />
        </div>
        <script>
            $(document).on("valiload", function () {
                vali.attach(".J_valitest6");
            });
        </script>
        <div class="tmpl-show"></div>
        <div class="tmpl-js"></div>
    </div>
    <div class="row">
        <h3>多重验证(只显示一条提示)</h3>
        <div class="show-html J_valitest7">
            <input type="text" class="text1 validate[required,custom[mobile]]" />
        </div>
        <script>
            $(document).on("valiload", function (e,_vali) {
                var vali = new _vali({
                    promptPosition: "centerRight",
                    showOneMessage: true
                });
                vali.attach(".J_valitest7");
            });
        </script>
        <div class="tmpl-show"></div>
        <div class="tmpl-js"></div>
    </div>
    <div class="row">
        <h3></h3>
        <div class="show-html">
        </div>
        <script>

        </script>
        <div class="tmpl-show"></div>
        <div class="tmpl-js"></div>
    </div>
    <script>
        seajs.config({
            base: "../../../jqmodule/"
        });
    </script>
    <script>
        var vali;
        seajs.use("validate/0.1.0/index", function (validate) {
            vali = new validate({
                promptPosition: "centerRight"
            });
            $(document).trigger("valiload", validate);
        });

        $(function () {
            //var rows = $(".row");
            //for (var i = 0; i < rows.length; i++) {
            //    var $obj = rows.eq(i);
            //    var _html = $obj.find('.show-html').html();
            //    var _js = $obj.find('script').html();
            //    _html = html_encode(style_html(_html));
            //    _js = html_encode(js_beautify(_js));
            //    $obj.find('.tmpl-show').html(_html);
            //    $obj.find('.tmpl-js').html(_js);
            //};
        });
    </script>
</body>

</html>
